openapi: 3.0.3
info:
  title: Complete E-commerce Management API
  version: 1.0.0
  description: Comprehensive API for managing e-commerce operations including products, inventory, orders, payments, users, and authentication.

servers:
  - url: http://localhost:3000/api
    description: Local development server

security:
  - bearerAuth: []

tags:
  - name: Authentication
    description: User authentication and authorization
  - name: Users
    description: User management endpoints
  - name: Categories
    description: Product category management
  - name: Products
    description: Product management (from existing spec)
  - name: Variants
    description: Product variant management
  - name: Inventory
    description: Inventory tracking and management
  - name: Orders
    description: Order processing and management
  - name: OrderItems
    description: Order items management
  - name: Payments
    description: Payment processing

paths:
  # Authentication endpoints
  /auth/register:
    post:
      tags: [Authentication]
      summary: Register a new user
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterDTO"
      responses:
        201:
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RegisterResponse"
        400:
          description: User already exists or validation error
        500:
          description: Registration failed

  /auth/login:
    post:
      tags: [Authentication]
      summary: User login
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginDTO"
      responses:
        200:
          description: Login successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"
        400:
          description: Invalid credentials
        500:
          description: Login failed

  /auth/logout:
    post:
      tags: [Authentication]
      summary: User logout
      responses:
        200:
          description: Logout successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string

  # User management endpoints
  /users:
    get:
      tags: [Users]
      summary: Get all users
      responses:
        200:
          description: List of users
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
        500:
          description: Failed to fetch users

  /users/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    get:
      tags: [Users]
      summary: Get user by ID
      responses:
        200:
          description: User found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        404:
          description: User not found
        500:
          description: Failed to fetch user

    put:
      tags: [Users]
      summary: Update user profile
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserDTO"
      responses:
        200:
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        400:
          description: Duplicate username or email
        404:
          description: User not found
        500:
          description: Failed to update user

    delete:
      tags: [Users]
      summary: Delete user
      responses:
        200:
          description: User deleted successfully
        404:
          description: User not found
        500:
          description: Failed to delete user

  # Category endpoints
  /categories:
    get:
      tags: [Categories]
      summary: Get all categories
      security: []
      responses:
        200:
          description: List of categories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CategoryWithProducts"
        500:
          description: Server error

    post:
      tags: [Categories]
      summary: Create a new category
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCategoryDTO"
      responses:
        201:
          description: Category created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Category"
        400:
          description: Category name is required
        500:
          description: Server error

  /categories/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    get:
      tags: [Categories]
      summary: Get category by ID
      security: []
      responses:
        200:
          description: Category found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryWithProducts"
        500:
          description: Server error

    put:
      tags: [Categories]
      summary: Update category
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateCategoryDTO"
      responses:
        200:
          description: Category updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Category"
        400:
          description: Invalid category ID or name required
        404:
          description: Category not found
        500:
          description: Server error

    delete:
      tags: [Categories]
      summary: Delete category
      responses:
        200:
          description: Category deleted successfully
        400:
          description: Invalid category ID
        404:
          description: Category not found
        500:
          description: Server error

  # Variant endpoints
  /variants:
    get:
      tags: [Variants]
      summary: Get all variants
      security: []
      responses:
        200:
          description: List of variants
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/VariantWithInventory"
        500:
          description: Server error

    post:
      tags: [Variants]
      summary: Create a new variant
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateVariantDTO"
      responses:
        201:
          description: Variant created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VariantWithInventory"
        400:
          description: Invalid data or missing required fields
        409:
          description: SKU already exists
        500:
          description: Server error

  /variants/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    put:
      tags: [Variants]
      summary: Update variant
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateVariantDTO"
      responses:
        200:
          description: Variant updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VariantWithInventory"
        400:
          description: Invalid variant ID
        404:
          description: Variant not found
        409:
          description: SKU already exists
        500:
          description: Server error

    delete:
      tags: [Variants]
      summary: Delete variant
      responses:
        200:
          description: Variant deleted successfully
        400:
          description: Invalid variant ID
        404:
          description: Variant not found
        500:
          description: Server error

  # Inventory endpoints
  /inventory:
    get:
      tags: [Inventory]
      summary: Get all inventory records
      security: []
      responses:
        200:
          description: List of inventory records
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/InventoryWithVariant"
        500:
          description: Server error

    post:
      tags: [Inventory]
      summary: Create inventory for a variant
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateInventoryDTO"
      responses:
        201:
          description: Inventory created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryWithVariant"
        400:
          description: Invalid data or missing required fields
        409:
          description: Inventory already exists for this variant
        500:
          description: Server error

  /inventory/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    get:
      tags: [Inventory]
      summary: Get inventory by ID
      security: []
      responses:
        200:
          description: Inventory found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryWithVariant"
        400:
          description: Invalid inventory ID
        404:
          description: Inventory not found
        500:
          description: Server error

  /inventory/{variantId}:
    parameters:
      - name: variantId
        in: path
        required: true
        schema:
          type: integer
    put:
      tags: [Inventory]
      summary: Update or create inventory by variant ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateInventoryDTO"
      responses:
        200:
          description: Inventory updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryWithVariant"
        400:
          description: Invalid data
        500:
          description: Server error

  /inventory/adjust/{variantId}:
    parameters:
      - name: variantId
        in: path
        required: true
        schema:
          type: integer
    patch:
      tags: [Inventory]
      summary: Adjust inventory quantity
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdjustInventoryDTO"
      responses:
        200:
          description: Inventory adjusted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryWithVariant"
        400:
          description: Invalid data or negative quantity result
        404:
          description: Inventory not found
        500:
          description: Server error

  /inventory/low-stock:
    get:
      tags: [Inventory]
      summary: Get low stock variants
      responses:
        200:
          description: List of low stock variants
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/InventoryWithVariant"
        500:
          description: Server error

  /inventory/search:
    get:
      tags: [Inventory]
      summary: Search and filter inventory
      security: []
      parameters:
        - name: variantId
          in: query
          schema: { type: integer }
        - name: minStock
          in: query
          schema: { type: integer }
        - name: maxStock
          in: query
          schema: { type: integer }
        - name: belowMinLevel
          in: query
          schema: { type: boolean }
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [updatedAt, quantity]
            default: updatedAt
        - name: sortOrder
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
        - name: page
          in: query
          schema: { type: integer, default: 1 }
        - name: limit
          in: query
          schema: { type: integer, default: 10 }
      responses:
        200:
          description: Search results
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventorySearchResponse"
        500:
          description: Server error

  # Order endpoints
  /orders:
    get:
      tags: [Orders]
      summary: Get all orders
      security: []
      responses:
        200:
          description: List of orders
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/OrderWithDetails"
        500:
          description: Failed to fetch orders

    post:
      tags: [Orders]
      summary: Create a new order
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateOrderDTO"
      responses:
        201:
          description: Order created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderWithItems"
        500:
          description: Failed to create order or insufficient stock

  /orders/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    get:
      tags: [Orders]
      summary: Get order by ID
      security: []
      responses:
        200:
          description: Order found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderWithDetails"
        400:
          description: Invalid order ID
        404:
          description: Order not found
        500:
          description: Failed to fetch order

    put:
      tags: [Orders]
      summary: Update order status
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateOrderStatusDTO"
      responses:
        200:
          description: Order status updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Order"
        400:
          description: Invalid status or status transition
        404:
          description: Order not found
        500:
          description: Failed to update order status

    delete:
      tags: [Orders]
      summary: Cancel and delete order
      responses:
        200:
          description: Order deleted successfully
        400:
          description: Invalid order ID or cannot cancel shipped/delivered order
        404:
          description: Order not found
        500:
          description: Failed to delete order

  /orders/search:
    get:
      tags: [Orders]
      summary: Search and filter orders
      security: []
      parameters:
        - name: userId
          in: query
          schema: { type: integer }
        - name: status
          in: query
          schema:
            type: string
            enum: [Pending, Shipped, Delivered, Cancelled]
        - name: startDate
          in: query
          schema: { type: string, format: date }
        - name: endDate
          in: query
          schema: { type: string, format: date }
        - name: search
          in: query
          schema: { type: string }
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [createdAt, orderDate, total]
            default: createdAt
        - name: sortOrder
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
        - name: page
          in: query
          schema: { type: integer, default: 1 }
        - name: limit
          in: query
          schema: { type: integer, default: 10 }
      responses:
        200:
          description: Search results
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderSearchResponse"
        500:
          description: Failed to fetch orders

  # Order Items endpoints
  /order-items:
    get:
      tags: [OrderItems]
      summary: Get all order items
      responses:
        200:
          description: List of order items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/OrderItemWithDetails"
        500:
          description: Failed to fetch order items

  # Payment endpoints
  /payments:
    get:
      tags: [Payments]
      summary: Get all payments
      security: []
      responses:
        200:
          description: List of payments
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/PaymentWithOrder"

    post:
      tags: [Payments]
      summary: Create a payment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePaymentDTO"
      responses:
        201:
          description: Payment created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Payment"
        400:
          description: Payment already exists for order

  /payments/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    get:
      tags: [Payments]
      summary: Get payment by ID
      security: []
      responses:
        200:
          description: Payment found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentWithOrder"
        404:
          description: Payment not found

    put:
      tags: [Payments]
      summary: Update payment status
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePaymentStatusDTO"
      responses:
        200:
          description: Payment and order status updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentUpdateResponse"
        400:
          description: Invalid payment status
        500:
          description: Failed to update payment status

  /payments/checkout:
    post:
      tags: [Payments]
      summary: Create Stripe checkout session
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCheckoutDTO"
      responses:
        200:
          description: Checkout session created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CheckoutResponse"
        400:
          description: Order not found, already paid, or has no items
        404:
          description: Order not found
        500:
          description: Failed to create checkout session

  # Products endpoints (from existing spec)
  /products:
    get:
      tags: [Products]
      summary: Get all products
      security: []
      responses:
        200:
          description: List of products
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductListResponse"
        500:
          description: Failed to fetch products

    post:
      tags: [Products]
      summary: Create a new product
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [name, description, price, category, image]
              properties:
                name: { type: string }
                description: { type: string }
                price: { type: number }
                category: { type: string }
                image: { type: string, format: binary }
      responses:
        201:
          description: Product created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
        400:
          description: Validation or duplicate error
        500:
          description: Failed to create product

  /products/search:
    get:
      tags: [Products]
      summary: Search and filter products
      security: []
      parameters:
        - name: search
          in: query
          schema: { type: string }
        - name: price
          in: query
          schema: { type: number }
        - name: categoryId
          in: query
          schema: { type: integer }
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [name, price, updatedAt]
        - name: sortOrder
          in: query
          schema:
            type: string
            enum: [asc, desc]
        - name: page
          in: query
          schema: { type: integer, default: 1 }
        - name: limit
          in: query
          schema: { type: integer, default: 10 }
      responses:
        200:
          description: Search results with pagination
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductSearchResponse"
        500:
          description: Failed to search products

  /products/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
    get:
      tags: [Products]
      summary: Get product by ID
      security: []
      responses:
        200:
          description: Product found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
        404:
          description: Product not found
        500:
          description: Server error

    put:
      tags: [Products]
      summary: Update product by ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProductDTO"
      responses:
        200:
          description: Product updated
        400:
          description: Invalid data
        404:
          description: Product not found
        500:
          description: Failed to update product

    delete:
      tags: [Products]
      summary: Delete product by ID
      responses:
        200:
          description: Product deleted
        400:
          description: Invalid ID
        404:
          description: Product not found
        500:
          description: Failed to delete product

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # Authentication schemas
    RegisterDTO:
      type: object
      required: [username, email, password, firstName, lastName]
      properties:
        username: { type: string }
        email: { type: string, format: email }
        password: { type: string, minLength: 6 }
        firstName: { type: string }
        lastName: { type: string }
        phoneNumber: { type: string }
        role:
          type: string
          enum: [Basic, Admin]
          default: Basic

    LoginDTO:
      type: object
      required: [password]
      properties:
        username: { type: string }
        email: { type: string, format: email }
        password: { type: string }

    RegisterResponse:
      type: object
      properties:
        message: { type: string }
        user:
          type: object
          properties:
            id: { type: integer }
            username: { type: string }
            email: { type: string }
            role: { type: string }

    LoginResponse:
      type: object
      properties:
        token: { type: string }

    # User schemas
    User:
      type: object
      properties:
        id: { type: integer }
        username: { type: string }
        email: { type: string }
        firstName: { type: string }
        lastName: { type: string }
        createdAt: { type: string, format: date-time }
        role:
          type: string
          enum: [Basic, Admin]

    UpdateUserDTO:
      type: object
      properties:
        username: { type: string }
        email: { type: string, format: email }
        firstName: { type: string }
        lastName: { type: string }
        phoneNumber: { type: string }

    # Category schemas
    Category:
      type: object
      properties:
        id: { type: integer }
        name: { type: string }

    CategoryWithProducts:
      allOf:
        - $ref: "#/components/schemas/Category"
        - type: object
          properties:
            products:
              type: array
              items:
                $ref: "#/components/schemas/Product"

    CreateCategoryDTO:
      type: object
      required: [name]
      properties:
        name: { type: string }

    UpdateCategoryDTO:
      type: object
      required: [name]
      properties:
        name: { type: string }

    # Variant schemas
    Variant:
      type: object
      properties:
        id: { type: integer }
        sku: { type: string }
        productId: { type: integer }
        price: { type: number }

    VariantWithInventory:
      allOf:
        - $ref: "#/components/schemas/Variant"
        - type: object
          properties:
            product:
              $ref: "#/components/schemas/Product"
            inventory:
              $ref: "#/components/schemas/Inventory"

    CreateVariantDTO:
      type: object
      required: [sku, productId, price]
      properties:
        sku: { type: string }
        productId: { type: integer }
        price: { type: number }
        inventoryQuantity: { type: integer, minimum: 0 }

    UpdateVariantDTO:
      type: object
      properties:
        sku: { type: string }
        price: { type: number }
        inventoryQuantity: { type: integer, minimum: 0 }

    # Inventory schemas
    Inventory:
      type: object
      properties:
        id: { type: integer }
        variantId: { type: integer }
        quantity: { type: integer }
        minStockLevel: { type: integer }

    InventoryWithVariant:
      allOf:
        - $ref: "#/components/schemas/Inventory"
        - type: object
          properties:
            variant:
              type: object
              properties:
                id: { type: integer }
                sku: { type: string }
                product:
                  $ref: "#/components/schemas/Product"

    CreateInventoryDTO:
      type: object
      required: [variantId, quantity]
      properties:
        variantId: { type: integer }
        quantity: { type: integer, minimum: 0 }
        minStockLevel: { type: integer, default: 5 }

    UpdateInventoryDTO:
      type: object
      required: [quantity]
      properties:
        quantity: { type: integer, minimum: 0 }
        minStockLevel: { type: integer }

    AdjustInventoryDTO:
      type: object
      required: [adjustment]
      properties:
        adjustment: { type: number }

    InventorySearchResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/InventoryWithVariant"
        meta:
          $ref: "#/components/schemas/PaginationMeta"

    # Order schemas
    Order:
      type: object
      properties:
        id: { type: integer }
        userId: { type: integer }
        orderDate: { type: string, format: date-time }
        status:
          type: string
          enum: [Pending, Shipped, Delivered, Cancelled]
        totalAmount: { type: number }
        total: { type: number }
        subtotal: { type: number }
        discount: { type: number }
        tax: { type: number }
        shipping: { type: number }
        shippingCity: { type: string }
        shippingState: { type: string }
        shippingCountry: { type: string }
        shippingMethod: { type: string }
        createdAt: { type: string, format: date-time }
        updatedAt: { type: string, format: date-time }

    OrderWithItems:
      allOf:
        - $ref: "#/components/schemas/Order"
        - type: object
          properties:
            orderItems:
              type: array
              items:
                $ref: "#/components/schemas/OrderItem"

    OrderWithDetails:
      allOf:
        - $ref: "#/components/schemas/Order"
        - type: object
          properties:
            user:
              $ref: "#/components/schemas/User"
            orderItems:
              type: array
              items:
                $ref: "#/components/schemas/OrderItemWithDetails"
            payment:
              $ref: "#/components/schemas/Payment"

    OrderItem:
      type: object
      properties:
        id: { type: integer }
        orderId: { type: integer }
        productId: { type: integer }
        variantId: { type: integer }
        quantity: { type: integer }
        price: { type: number }

    OrderItemWithDetails:
      allOf:
        - $ref: "#/components/schemas/OrderItem"
        - type: object
          properties:
            order:
              $ref: "#/components/schemas/Order"
            product:
              $ref: "#/components/schemas/Product"
            variant:
              $ref: "#/components/schemas/Variant"

    CreateOrderDTO:
      type: object
      required: [userId, orderItems, total]
      properties:
        userId: { type: integer }
        shippingCity: { type: string }
        shippingState: { type: string }
        shippingCountry: { type: string }
        shippingMethod: { type: string }
        subtotal: { type: number }
        discount: { type: number, default: 0 }
        tax: { type: number, default: 0 }
        shipping: { type: number, default: 0 }
        total: { type: number }
        orderItems:
          type: array
          items:
            type: object
            required: [productId, variantId, quantity, price]
            properties:
              productId: { type: integer }
              variantId: { type: integer }
              quantity: { type: integer, minimum: 1 }
              price: { type: number }

    UpdateOrderStatusDTO:
      type: object
      required: [status]
      properties:
        status:
          type: string
          enum: [Pending, Shipped, Delivered, Cancelled]

    OrderSearchResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/OrderWithDetails"
        meta:
          $ref: "#/components/schemas/PaginationMeta"

    # Payment schemas
    Payment:
      type: object
      properties:
        id: { type: integer }
        orderId: { type: integer }
        paymentMethod: { type: string }
        amount: { type: number }
        status:
          type: string
          enum: [Pending, Completed, Failed]
          default: Pending
        paymentDate: { type: string, format: date-time }

    PaymentWithOrder:
      allOf:
        - $ref: "#/components/schemas/Payment"
        - type: object
          properties:
            order:
              $ref: "#/components/schemas/Order"

    CreatePaymentDTO:
      type: object
      required: [orderId, paymentMethod, amount]
      properties:
        orderId: { type: integer }
        paymentMethod: { type: string }
        amount: { type: number }

    UpdatePaymentStatusDTO:
      type: object
      required: [status]
      properties:
        status:
          type: string
          enum: [Pending, Completed, Failed]

    PaymentUpdateResponse:
      type: object
      properties:
        message: { type: string }
        payment:
          $ref: "#/components/schemas/Payment"
        order:
          $ref: "#/components/schemas/Order"

    CreateCheckoutDTO:
      type: object
      required: [orderId]
      properties:
        orderId: { type: integer }

    CheckoutResponse:
      type: object
      properties:
        url: { type: string }

    # Product schemas (from existing spec)
    Product:
      type: object
      properties:
        id: { type: integer }
        name: { type: string }
        description: { type: string }
        price: { type: number }
        imageurl: { type: string }
        category:
          $ref: "#/components/schemas/Category"
        variants:
          type: array
          items:
            $ref: "#/components/schemas/Variant"
        createdAt: { type: string, format: date-time }
        updatedAt: { type: string, format: date-time }

    CreateProductDTO:
      type: object
      required: [name, description, price, category]
      properties:
        name: { type: string }
        description: { type: string }
        price: { type: number }
        category: { type: string }

    UpdateProductDTO:
      type: object
      properties:
        name: { type: string }
        description: { type: string }
        price: { type: number }
        category: { type: string }

    ProductListResponse:
      type: array
      items:
        $ref: "#/components/schemas/Product"

    ProductSearchResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Product"
        meta:
          $ref: "#/components/schemas/PaginationMeta"

    # Common schemas
    PaginationMeta:
      type: object
      properties:
        total: { type: integer }
        page: { type: integer }
        pageSize: { type: integer }
        totalPages: { type: integer }

    ErrorResponse:
      type: object
      properties:
        error: { type: string }
        message: { type: string }
